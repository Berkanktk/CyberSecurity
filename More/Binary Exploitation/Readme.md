# Binary Exploitation and ELF files
When compiling C/C++ source code in Linux, an ELF (Executable and Linkable Format) file is created. The flags added when compiling can affect the binary in various ways, like the protections. Another thing affected can be the architecture and the way it's linked.

If the system in which the challenge is compiled is x86_64 and no flag is specified, the ELF would be x86-64 / 64-bit. If it's compiled with a flag to indicate the system, it can be x86 / 32-bit binary.

## Stripped and not stripped
To reduce its size and make debugging more difficult, the binary can be stripped or not stripped.

* **Stripped**: The binary does not contain debugging information.
* **Not Stripped**: The binary contains debugging information.

## Dynamic and static linking

* **Dynamic linking**: A pointer to the linked file is included in the executable, and the file contents are not included at link time. These files are used when the program is run.
* **Static linking**: The code for all the routines called by your program becomes part of the executable file.

## Protections
The most common protections in a binary are:

* **Canary**: A random value that is generated, put on the stack, and checked before that function is left again. If the canary value is not correct-has been changed or overwritten, the application will immediately stop.
* **NX**: Stands for non-executable segments, meaning we cannot write and execute code on the stack.
* **PIE**: Stands for Position Independent Executable, which randomizes the base address of the binary as it tells the loader which virtual address it should use.
* **RelRO**: Stands for Relocation Read-Only. The headers of the binary are marked as read-only.

## Example
Run the `file` command in the terminal and `checksec` either in GDB or in the terminal to see the ELF file and its protections.


Example output of the `file` command:
```bash
> file test
test: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=5a83587fbda6ad7b1aeee2d59f027a882bf2a429, for GNU/Linux 3.2.0, not stripped.
```

Example output of 'checksec' command:
```bash
gef➤ checksec
Canary                        : ✘
NX                            : ✓
PIE                           : ✘
Fortify                       : ✘
RelRO                         : Partial
```
## The Main Function
By default, a binary file starts executing from the 'main()' function.

```c
void main(){
    vuln();
}
```

In this case, 'main()' only calls another function, 'vuln()'. The function 'vuln()' has 3 lines.

```c
void vuln(){
    char buffer[0x20] = {0};
    fprintf(stdout, "\nEnter payload here: ");
    fgets(buffer, 0x100, stdin);
}
```

The first line declares a 0x20-byte buffer of characters and fills it with zeros. The second line calls 'fprintf()' to print a message to stdout. Finally, the third line calls 'fgets()' to read 0x100 bytes from stdin and store them to the aformentioned buffer.